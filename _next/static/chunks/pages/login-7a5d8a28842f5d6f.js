(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{641:(e,r,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return s(3932)}])},3932:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>u});var o=s(7876),a=s(4232),i=s(8943),n=s(8106);let t="https://nvgjaesgudniaxernvqt.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im52Z2phZXNndWRuaWF4ZXJudnF0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NDI2NTYsImV4cCI6MjA3NTMxODY1Nn0.zr5di6-1zk8zfGOEVNZy5E2_AW3DsdCsQc73sbXkU04",d=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,c=(0,n.v)((e,r)=>({mode:"signin",email:"",password:"",confirmPassword:"",errors:{},loading:!1,message:"",setMode:r=>e({mode:r,errors:{},message:""}),setEmail:r=>e({email:r}),setPassword:r=>e({password:r}),setConfirmPassword:r=>e({confirmPassword:r}),clearErrors:()=>e({errors:{}}),clearFieldError:r=>e(e=>({errors:{...e.errors,[r]:void 0}})),resetForm:()=>e({email:"",password:"",confirmPassword:"",errors:{}}),clearMessage:()=>e({message:""}),validateEmail:async()=>{let{email:s}=r();if(!s.trim())return e(e=>({errors:{...e.errors,email:"login.emailRequired"}})),!1;if(!d.test(s))return e(e=>({errors:{...e.errors,email:"login.emailInvalid"}})),!1;try{let o="".concat(t,"/rest/v1/users?select=id&email=eq.").concat(encodeURIComponent(s)),a=await fetch(o,{method:"GET",headers:{apikey:l,Authorization:"Bearer ".concat(l),"Content-Type":"application/json"}}),i=await a.json();if("signin"===r().mode&&0===i.length)return e({message:"login.userNotExist",errors:{}}),setTimeout(()=>{r().clearMessage(),r().resetForm()},5e3),!1;if("signup"===r().mode&&i.length>0)return e(e=>({errors:{...e.errors,email:"login.emailExists"}})),!1}catch(e){console.error("login.emailValidationFailed",e)}return e(e=>({errors:{...e.errors,email:void 0}})),!0},validatePasswords:()=>{let{password:s,confirmPassword:o,mode:a}=r(),i=!0,n={};return s?"signup"===a&&s.length<6&&(n.password="login.passwordMin",i=!1):(n.password="login.passwordRequired",i=!1),"signup"===a&&(o?s!==o&&(n.confirmPassword="login.passwordsMustMatch",i=!1):(n.confirmPassword="login.confirmPasswordRequired",i=!1)),e(e=>({errors:{...e.errors,...n}})),i&&e(e=>({errors:{...e.errors,password:void 0,confirmPassword:void 0}})),i},signIn:async()=>{let{email:s,password:o,validateEmail:a,resetForm:i,clearMessage:n}=r();if(e({message:""}),await a()){if(!o)return void e(e=>({errors:{...e.errors,password:"login.passwordEmpty"}}));try{e({loading:!0});let r="".concat(t,"/rest/v1/users?select=id,email,password&email=eq.").concat(encodeURIComponent(s)),a=await fetch(r,{method:"GET",headers:{apikey:l,Authorization:"Bearer ".concat(l),"Content-Type":"application/json"}}),d=await a.json();1===d.length&&(d[0].password===o?(e({message:"login.welcomeBack",errors:{}}),setTimeout(()=>{n(),i()},5e3)):e(e=>({errors:{...e.errors,password:"login.passwordIncorrect"}})))}catch(r){e({message:"login.unexpectedError"})}finally{e({loading:!1})}}},signUp:async()=>{let{email:s,password:o,confirmPassword:a,validateEmail:i,validatePasswords:n,resetForm:d,setMode:c}=r();if((e({message:""}),await i())&&n())try{e({loading:!0});let a=await fetch("".concat(t,"/rest/v1/users"),{method:"POST",headers:{apikey:l,Authorization:"Bearer ".concat(l),"Content-Type":"application/json",Prefer:"return=representation"},body:JSON.stringify({email:s,password:o})});if(!a.ok)throw Error("login.failedCreateUser");let i=await a.json();Array.isArray(i)&&i.length>0?(e({message:"login.accountCreated"}),setTimeout(()=>{d(),c("signin"),r().clearMessage()},5e3)):e({message:"login.signupFailed"})}catch(r){e({message:"login.unexpectedError"})}finally{e({loading:!1})}},signInWithGoogle:()=>{e({message:"login.googleNotAvailable"})}}));var m=s(4846),g=s(2491),p=s.n(g);let u=()=>{let{t:e}=(0,m.Bd)(),{mode:r,email:s,password:n,confirmPassword:t,errors:l,loading:d,message:g,setMode:u,setEmail:f,setPassword:x,setConfirmPassword:w,validateEmail:h,validatePasswords:y,clearErrors:b,clearFieldError:v,signIn:N,signUp:j,signInWithGoogle:P}=c(),C="signin"===r,E=(0,a.useCallback)(async e=>{e.preventDefault(),b(),C?await N():await j()},[C,b,N,j]);return(0,a.useEffect)(()=>{if(!g)return;let r=["login.welcomeBack","login.accountCreated"].includes(g),s=document.documentElement.classList.contains("dark");p().fire({icon:r?"success":"login.googleNotAvailable"===g?"info":"error",title:r?e("Success"):e("Error"),text:e(g),background:s?"#3f3f46":"#ffffff",color:s?"#ffffff":"#1f2937",customClass:{title:"text-lg font-PoppinsBold",htmlContainer:"text-base font-PoppinsMedium",confirmButton:"px-8 py-2 bg-orange-300 text-zinc-700 rounded-lg font-PoppinsBold cursor-pointer"},buttonsStyling:!1}).then(()=>{c.getState().clearMessage()})},[g,e]),(0,o.jsxs)("div",{className:"@container min-h-[600px] w-full z-0 bg-[url(/Coffee-Shop/images/body-bg.png)] relative bg-no-repeat bg-cover md:mt-35 mb-12 mt-20",children:[(0,o.jsx)("div",{className:"absolute inset-0 z-0 bg-gradient-to-t from-gray-100/65 to-gray-100/65 dark:hidden"}),(0,o.jsx)("div",{className:"@8xl:w-[1260px] @8xl:mx-auto @3xl:mx-10 mx-4 relative z-10 mt-8",children:(0,o.jsx)("div",{className:"flex justify-center items-center",children:(0,o.jsx)("div",{className:"flex items-center justify-center py-10 px-6 bg-white dark:bg-zinc-700    md:w-95 w-88 rounded-2xl shadow-normal",children:(0,o.jsxs)("form",{className:"flex flex-col items-center justify-center w-full",onSubmit:E,noValidate:!0,children:[(0,o.jsx)("div",{className:"mt-6 md:mt-8 md:w-38 md:h-20 w-30 h-15 text-orange-300 md:dark:text-orange-200",children:(0,o.jsx)(i.A,{})}),(0,o.jsxs)("div",{className:"flex flex-col w-full mt-4",children:[(0,o.jsx)("input",{type:"email",placeholder:e("login.enterEmail"),className:"input-login text-login",value:s,onChange:e=>{f(e.target.value),v("email")},onBlur:h,"aria-invalid":!!l.email,"aria-describedby":"email-error"}),(0,o.jsx)("span",{id:"email-error",className:"error-login ".concat(l.email?"":"hidden"),children:l.email&&e(l.email)}),(0,o.jsx)("input",{type:"password",placeholder:e("login.enterPassword"),className:"input-login text-login",value:n,onChange:e=>{x(e.target.value),v("password")},onBlur:()=>{C||y()},"aria-invalid":!!l.password,"aria-describedby":"password-error"}),(0,o.jsx)("span",{id:"password-error",className:"error-login ".concat(l.password?"":"hidden"),children:l.password&&e(l.password)}),(0,o.jsx)("input",{type:"password",placeholder:e("login.confirmPassword"),className:"input-login text-login ".concat(C?"hidden":""),value:t,onChange:e=>{w(e.target.value),v("confirmPassword")},onBlur:()=>{C||y()},"aria-invalid":!!l.confirmPassword,"aria-describedby":"confirm-error"}),(0,o.jsx)("span",{id:"confirm-error",className:"error-login ".concat(!C&&l.confirmPassword?"":"hidden"),children:l.confirmPassword&&e(l.confirmPassword)}),(0,o.jsx)("button",{type:"submit",className:"w-full p-2 mt-16 mb-1 cursor-pointer font-PoppinsMedium md:text-xl text-lg text-zinc-700 rounded-lg shadow-normal bg-gradient-to-l from-orange-200 to-orange-300 disabled:opacity-60",disabled:d,children:C?e("Login"):e("Register")}),(0,o.jsxs)("div",{className:"flex justify-center items-center my-1",children:[(0,o.jsx)("span",{className:"line-login"}),(0,o.jsx)("span",{className:"mx-2 md:text-base text-sm text-login",children:e("login.or")}),(0,o.jsx)("span",{className:"line-login"})]}),(0,o.jsx)("div",{className:"md:text-xl text-lg mx-auto text-login cursor-pointer",onClick:P,children:e("login.signinGoogle")})]}),(0,o.jsxs)("div",{className:"mt-13 md:text-xl text-lg text-login",children:[C?e("login.donotAccount"):e("login.alreadyAccount"),(0,o.jsx)("button",{type:"button",className:"font-PoppinsBold text-orange-300 ml-1 mb-6 cursor-pointer",onClick:()=>u(C?"signup":"signin"),children:C?e("Register"):e("Login")})]})]})})})})]})}}},e=>{e.O(0,[390,636,593,792],()=>e(e.s=641)),_N_E=e.O()}]);